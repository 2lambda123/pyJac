<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Examples &#8212; pyJac 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="pyJac 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Installation" href="installing.html" />
    <link rel="prev" title="Overview" href="overview.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>Some example input files are included in the <code class="docutils literal"><span class="pre">data</span></code> directory.</p>
<p>After installing pyJac, or in the package directory, you can see all of the
usage options with a standard <code class="docutils literal"><span class="pre">--help</span></code> or <code class="docutils literal"><span class="pre">-h</span></code> option:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyjac</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<div class="section" id="jacobian-file-generation">
<h2>Jacobian file generation<a class="headerlink" href="#jacobian-file-generation" title="Permalink to this headline">¶</a></h2>
<p>To generate the Jacobian source files for a hydrogen-air system in C (without
any cache optimization):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyjac</span> <span class="o">--</span><span class="n">lang</span> <span class="n">c</span> <span class="o">--</span><span class="nb">input</span> <span class="n">data</span><span class="o">/</span><span class="n">h2o2</span><span class="o">.</span><span class="n">inp</span>
</pre></div>
</div>
<p>CUDA source code can be generated similarly:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyjac</span> <span class="o">--</span><span class="n">lang</span> <span class="n">cuda</span> <span class="o">--</span><span class="nb">input</span> <span class="n">data</span><span class="o">/</span><span class="n">h2o2</span><span class="o">.</span><span class="n">inp</span>
</pre></div>
</div>
</div>
<div class="section" id="functional-testing">
<h2>Functional testing<a class="headerlink" href="#functional-testing" title="Permalink to this headline">¶</a></h2>
<p>Functional testing (i.e., testing whether pyJac gives the correct results)
requires thermochemical state data. This can be generated using the built-in
partially stirred reactor (PaSR) module:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyjac</span><span class="o">.</span><span class="n">functional_tester</span><span class="o">.</span><span class="n">partially_stirred_reactor</span> \
<span class="o">--</span><span class="n">mech</span> <span class="n">data</span><span class="o">/</span><span class="n">h2o2</span><span class="o">.</span><span class="n">cti</span> <span class="o">--</span><span class="nb">input</span> <span class="n">data</span><span class="o">/</span><span class="n">pasr_input</span><span class="o">.</span><span class="n">yaml</span> \
<span class="o">--</span><span class="n">output</span> <span class="n">h2_pasr_output</span><span class="o">.</span><span class="n">npy</span>
</pre></div>
</div>
<p>Then, functional testing using this data can be performed via:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyjac</span><span class="o">.</span><span class="n">functional_tester</span> <span class="o">--</span><span class="n">mech</span> <span class="n">data</span><span class="o">/</span><span class="n">h2o2</span><span class="o">.</span><span class="n">cti</span> <span class="o">--</span><span class="n">lang</span> <span class="n">c</span> \
<span class="o">--</span><span class="n">pasr_output</span> <span class="n">h2_pasr_output</span><span class="o">.</span><span class="n">npy</span>
</pre></div>
</div>
<p><strong>Alternatively</strong>, you can perform the test using provided example data:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyjac</span><span class="o">.</span><span class="n">functional_tester</span> <span class="o">--</span><span class="n">mech</span> <span class="n">data</span><span class="o">/</span><span class="n">h2o2</span><span class="o">.</span><span class="n">cti</span> <span class="o">--</span><span class="n">lang</span> <span class="n">c</span> \
<span class="o">--</span><span class="n">pasr_output</span> <span class="n">data</span><span class="o">/</span><span class="n">h2_pasr_output</span><span class="o">.</span><span class="n">npy</span>
</pre></div>
</div>
<p>Detailed error statistics are saved in <code class="docutils literal"><span class="pre">error_arrays.npz</span></code>, and overall results
printed to screen.</p>
</div>
<div class="section" id="performance-testing">
<h2>Performance testing<a class="headerlink" href="#performance-testing" title="Permalink to this headline">¶</a></h2>
<p>The performance of the analytical Jacobian matrix evaluation using pyJac can be
tested against finite differencing and TChem. With the appropriate environment
established, this test can be performed by giving only two arguments: a base
directory and a number of OpenMP threads to use. The program scans for
subdirectories in the base directory, looking for the following keys:</p>
<blockquote>
<div><ul class="simple">
<li>A Cantera mechanism (ending with .cti)</li>
<li>A Chemkin mechanism of the same name (ending with .dat)</li>
<li>An (optional) Chemkin thermodynamic file (with &#8220;therm&#8221; in filename)
if required. If the thermo file is not specified, the mechanism is assumed
to contain the thermo data.</li>
<li>Thermochemical state data (as generated previously using the PaSR module)
files ending with <code class="docutils literal"><span class="pre">*.npy</span></code></li>
</ul>
</div></blockquote>
<p>Note that all <code class="docutils literal"><span class="pre">*.npy</span></code> files in a directory will be used for testing purposes.</p>
<p>The performance tester can be called using:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pyjac</span><span class="o">.</span><span class="n">performance_tester</span> <span class="o">-</span><span class="n">w</span> <span class="n">data</span><span class="o">/</span> <span class="o">-</span><span class="n">nt</span> <span class="mi">12</span>
</pre></div>
</div>
</div>
<div class="section" id="library-generation">
<h2>Library Generation<a class="headerlink" href="#library-generation" title="Permalink to this headline">¶</a></h2>
<p>pyJac also has the ability to generate shared / static libraries for
linkage to external programs.  This functionality is available via the
<a class="reference internal" href="src/pyjac.libgen.html#module-pyjac.libgen" title="pyjac.libgen"><code class="xref py py-mod docutils literal"><span class="pre">pyjac.libgen</span></code></a> submodule, and requires a gcc/nvcc installation available
on the path.  It can be called as:</p>
<blockquote>
<div><dl class="docutils">
<dt>python -m pyjac.libgen &#8211;source_dir /path/to/generated/pyjac/output </dt>
<dd>&#8211;lang cuda &#8211;static</dd>
</dl>
</div></blockquote>
<p>Note that for linkage into an external program, CUDA requires use of a
static library.</p>
</div>
<div class="section" id="python-wrapper-generation">
<h2>Python Wrapper Generation<a class="headerlink" href="#python-wrapper-generation" title="Permalink to this headline">¶</a></h2>
<p>In addition to the library generation described above, pyJac can directly
generate a python wrapper for chemical source term / Jacobian evaluation
(among others) directly from python.  This functionality can be called
via (e.g.,):</p>
<blockquote>
<div><dl class="docutils">
<dt>python -m pyjac.pywrap &#8211;source_dir /path/to/generated/pyjac/output </dt>
<dd>&#8211;lang cuda</dd>
</dl>
</div></blockquote>
<p>For details of the functions included in the python wrapper, look at the
.pyx files in <a class="reference internal" href="src/pyjac.pywrap.html#module-pyjac.pywrap" title="pyjac.pywrap"><code class="xref py py-mod docutils literal"><span class="pre">pyjac.pywrap</span></code></a>, or the calls in
<a class="reference internal" href="src/pyjac.functional_tester.test.html#pyjac.functional_tester.test.cpyjac_evaluator" title="pyjac.functional_tester.test.cpyjac_evaluator"><code class="xref py py-class docutils literal"><span class="pre">pyjac.functional_tester.test.cpyjac_evaluator</span></code></a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyJac</a></h1>



<p class="blurb">Python-based generator of analytical Jacobians for chemical kinetics</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=kyleniemeyer&repo=pyjac&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="src/index.html">pyJac API</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Kyle Niemeyer, Nicholas Curtis.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.9</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/examples.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/kyleniemeyer/pyjac" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>